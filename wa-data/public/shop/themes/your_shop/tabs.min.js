$.product={init:function(){"undefined"!=typeof $.History?$.History.bind(function(t){$.product.dispatch(t)}):this.dispatch()},getHash:function(){return this.cleanHash()},cleanHash:function(t){for("undefined"==typeof t&&(t=window.location.hash.toString()),t.length||(t=""+t);t.length>0&&"/"===t[t.length-1];)t=t.substr(0,t.length-1);return t+="/","#"!=t[0]?("/"!=t[0]&&(t="/"+t),t="#"+t):t[1]&&"/"!=t[1]&&(t="#/"+t.substr(1)),"#/"==t?"":t},setHash:function(t){return t instanceof String||!t.toString||(t=t.toString()),t=t.replace(/\/\//g,"/"),t=t.replace(/^.*#/,""),parent&&!$.browser.msie?parent.window.location.hash=t:location.hash=t,!0},highlightTab:function(t){$("#product-tabs li").removeClass("selected"),$("#product-tabs a[data-id='"+t+"']").parent("li").addClass("selected")},reviewsAction:function(t){var i=$("#product-tabs a[data-id='"+t+"']").attr("href");i&&$.get(i,{},function(i){$("#"+t).html($(i).find(".reviews")),$(".rating-table").prependTo($("#"+t));var e=$(i).find(".add-js");e.length&&$.each(e,function(t,i){$.ajax({url:$(i).data("js"),dataType:"script",async:!1})})})},pageAction:function(t){var i=$("#product-tabs a[data-id='"+t+"']").attr("href");i&&$.get(i,{},function(i){var e,a=/(?:(<div\s+class\=\"page\">[\s\S]*))(<script\b[^>]*>[\s\S]*?<\/script>)(?:([\s\S]*<\/div><!\-\-\sEND\s\-\->))/gm,n=/(<script\b[^>]*>[\s\S]*?<\/script>)/gm,s=[];if((e=a.exec(i))&&""!=e[1]){for(var o;o=n.exec(e[0]);){var r=$(o[0]);r.attr("src")?$.getScript(r.attr("src")):s.push(r.html())}$.each(s,function(t,i){setTimeout(function(){var t=new Function(i);t()},500)})}$("#"+t).html($(i).find("#page-content"))})},dispatch:function(t){var i="overview";if(this.stopDispatchIndex>0)return this.stopDispatchIndex--,!1;if(t=void 0===t?this.getHash():this.cleanHash(t),t=t.replace(/^[^#]*#\/*/,"")){t=t.split("/");var e=t[0]||"overview";"overview"==e||"reviews"==e?i=e:(e="page",i=t[0]),"reviews"==e&&$("html, body").animate({scrollTop:$("#product-tabs").offset().top-100},2e3)}else var e="overview";$("#tab-content > div").hide(),i=i.replace(/\s/g,"_"),$("#"+i).length?$("#"+i).show():this[e+"Action"]?($("#tab-content").append("<div id='"+i+"' style='display: block'><i class='icon16 loading'></i> "+$.yourshop.translate("Loading")+"...</div>"),this[e+"Action"](i)):(console&&console.log("Invalid action name:",e+"Action"),$("#overview").show()),$.product.highlightTab(i),$(document).trigger("hashchange",[t])}},jQuery(document).ready(function(t){t("#product-tabs a").click(function(){var i=t(this),e=i.data("id");if(void 0!==e){if(!i.hasClass("show-tab"))return t.product.setHash(t.product.cleanHash(e)),!1;if(t("#"+e).length)return t("#tab-content > div").hide(),t("#"+e).show(),t.product.highlightTab(e),!1}}),t.product.init()});